{
  "name": "install-grafana",
  "description": "Fetch Grafana installation script from GitHub and return the script content",
  "version": "0.0.1",
  "kind": "composition",
  "manifest_version": 1,
  "repository": "github.com/tgirotto/install-grafana",
  "license": "MIT",
  "inputs": [
    {
      "name": "script_url",
      "description": "URL to the Grafana installation script",
      "type": "string",
      "required": false,
      "default": "https://raw.githubusercontent.com/tgirotto/install-grafana/refs/heads/main/install-grafana.sh"
    },
    {
      "name": "privateKey",
      "description": "SSH private key for authentication",
      "type": "string",
      "required": true
    },
    {
      "name": "user",
      "description": "SSH username (e.g., ubuntu, root)",
      "type": "string",
      "required": true
    },
    {
      "name": "host",
      "description": "SSH host (IP address or hostname)",
      "type": "string",
      "required": true
    }
  ],
  "steps": {
    "fetch_script": {
      "uses": "starthubhq/http-get-wasm:0.0.16",
      "inputs": [
        "{{inputs[0]}}",
        {
          "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8",
          "User-Agent": "StartHub-Install-Grafana/1.0"
        }
      ]
    },
    "execute_script": {
      "uses": "starthubhq/ssh:0.0.1",
      "inputs": [
        "{{inputs[1]}}",
        "{{inputs[2]}}",
        "{{inputs[3]}}",
        "{{steps.fetch_script.outputs[0].body}}"
      ]
    }
  },
  "outputs": [
    {
      "name": "script_content",
      "description": "The Grafana installation script content",
      "type": "string",
      "value": "{{steps.fetch_script.outputs[0].body}}"
    },
    {
      "name": "execution_result",
      "description": "SSH execution result",
      "type": "string",
      "value": "{{steps.execute_script.outputs[0].stdout}}"
    }
  ],
  "permissions": {
    "net": ["http", "https"]
  },
  "mirrors": [
    
  ]
}